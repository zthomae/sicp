<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>3.11&nbsp;Exercise 3.11</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">zthomae&rsquo;s SICP solutions</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Chapter_1.html" class="tocviewlink" data-pltdoc="x">Chapter 1</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Chapter_2.html" class="tocviewlink" data-pltdoc="x">Chapter 2</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Chapter_3.html" class="tocviewselflink" data-pltdoc="x">Chapter 3</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>3&nbsp;</td><td><a href="Chapter_3.html" class="tocviewlink" data-pltdoc="x">Chapter 3</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="c3e1.html" class="tocviewlink" data-pltdoc="x">Exercise 3.1</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="c3e2.html" class="tocviewlink" data-pltdoc="x">Exercise 3.2</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="c3e3.html" class="tocviewlink" data-pltdoc="x">Exercise 3.3</a></td></tr><tr><td align="right">3.4&nbsp;</td><td><a href="c3e4.html" class="tocviewlink" data-pltdoc="x">Exercise 3.4</a></td></tr><tr><td align="right">3.5&nbsp;</td><td><a href="c3e5.html" class="tocviewlink" data-pltdoc="x">Exercise 3.5</a></td></tr><tr><td align="right">3.6&nbsp;</td><td><a href="c3e6.html" class="tocviewlink" data-pltdoc="x">Exercise 3.6</a></td></tr><tr><td align="right">3.7&nbsp;</td><td><a href="c3e7.html" class="tocviewlink" data-pltdoc="x">Exercise 3.7</a></td></tr><tr><td align="right">3.8&nbsp;</td><td><a href="c3e8.html" class="tocviewlink" data-pltdoc="x">Exercise 3.8</a></td></tr><tr><td align="right">3.9&nbsp;</td><td><a href="c3e9.html" class="tocviewlink" data-pltdoc="x">Exercise 3.9</a></td></tr><tr><td align="right">3.10&nbsp;</td><td><a href="c3e10.html" class="tocviewlink" data-pltdoc="x">Exercise 3.10</a></td></tr><tr><td align="right">3.11&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Exercise 3.11</a></td></tr><tr><td align="right">3.12&nbsp;</td><td><a href="c3e12.html" class="tocviewlink" data-pltdoc="x">Exercise 3.12</a></td></tr><tr><td align="right">3.13&nbsp;</td><td><a href="c3e13.html" class="tocviewlink" data-pltdoc="x">Exercise 3.13</a></td></tr><tr><td align="right">3.14&nbsp;</td><td><a href="c3e14.html" class="tocviewlink" data-pltdoc="x">Exercise 3.14</a></td></tr><tr><td align="right">3.15&nbsp;</td><td><a href="c3e15.html" class="tocviewlink" data-pltdoc="x">Exercise 3.15</a></td></tr><tr><td align="right">3.16&nbsp;</td><td><a href="c3e16.html" class="tocviewlink" data-pltdoc="x">Exercise 3.16</a></td></tr><tr><td align="right">3.17&nbsp;</td><td><a href="c3e17.html" class="tocviewlink" data-pltdoc="x">Exercise 3.17</a></td></tr><tr><td align="right">3.18&nbsp;</td><td><a href="c3e18.html" class="tocviewlink" data-pltdoc="x">Exercise 3.18</a></td></tr><tr><td align="right">3.19&nbsp;</td><td><a href="c3e19.html" class="tocviewlink" data-pltdoc="x">Exercise 3.19</a></td></tr><tr><td align="right">3.20&nbsp;</td><td><a href="c3e20.html" class="tocviewlink" data-pltdoc="x">Exercise 3.20</a></td></tr><tr><td align="right">3.21&nbsp;</td><td><a href="c3e21.html" class="tocviewlink" data-pltdoc="x">Exercise 3.21</a></td></tr><tr><td align="right">3.22&nbsp;</td><td><a href="c3e22.html" class="tocviewlink" data-pltdoc="x">Exercise 3.22</a></td></tr><tr><td align="right">3.23&nbsp;</td><td><a href="c3e23.html" class="tocviewlink" data-pltdoc="x">Exercise 3.23</a></td></tr><tr><td align="right">3.24&nbsp;</td><td><a href="c3e24.html" class="tocviewlink" data-pltdoc="x">Exercise 3.24</a></td></tr><tr><td align="right">3.25&nbsp;</td><td><a href="c3e25.html" class="tocviewlink" data-pltdoc="x">Exercise 3.25</a></td></tr><tr><td align="right">3.26&nbsp;</td><td><a href="c3e26.html" class="tocviewlink" data-pltdoc="x">Exercise 3.26</a></td></tr><tr><td align="right">3.27&nbsp;</td><td><a href="c3e27.html" class="tocviewlink" data-pltdoc="x">Exercise 3.27</a></td></tr><tr><td align="right">3.28&nbsp;</td><td><a href="c3e28.html" class="tocviewlink" data-pltdoc="x">Exercise 3.28</a></td></tr><tr><td align="right">3.29&nbsp;</td><td><a href="c3e29.html" class="tocviewlink" data-pltdoc="x">Exercise 3.29</a></td></tr><tr><td align="right">3.30&nbsp;</td><td><a href="c3e30.html" class="tocviewlink" data-pltdoc="x">Exercise 3.30</a></td></tr><tr><td align="right">3.31&nbsp;</td><td><a href="c3e31.html" class="tocviewlink" data-pltdoc="x">Exercise 3.31</a></td></tr><tr><td align="right">3.32&nbsp;</td><td><a href="c3e32.html" class="tocviewlink" data-pltdoc="x">Exercise 3.32</a></td></tr><tr><td align="right">3.33&nbsp;</td><td><a href="c3e33.html" class="tocviewlink" data-pltdoc="x">Exercise 3.33</a></td></tr><tr><td align="right">3.34&nbsp;</td><td><a href="c3e34.html" class="tocviewlink" data-pltdoc="x">Exercise 3.34</a></td></tr><tr><td align="right">3.35&nbsp;</td><td><a href="c3e35.html" class="tocviewlink" data-pltdoc="x">Exercise 3.35</a></td></tr><tr><td align="right">3.36&nbsp;</td><td><a href="c3e36.html" class="tocviewlink" data-pltdoc="x">Exercise 3.36</a></td></tr><tr><td align="right">3.37&nbsp;</td><td><a href="c3e37.html" class="tocviewlink" data-pltdoc="x">Exercise 3.37</a></td></tr><tr><td align="right">3.38&nbsp;</td><td><a href="c3e38.html" class="tocviewlink" data-pltdoc="x">Exercise 3.38</a></td></tr><tr><td align="right">3.39&nbsp;</td><td><a href="c3e39.html" class="tocviewlink" data-pltdoc="x">Exercise 3.39</a></td></tr><tr><td align="right">3.40&nbsp;</td><td><a href="c3e40.html" class="tocviewlink" data-pltdoc="x">Exercise 3.40</a></td></tr><tr><td align="right">3.41&nbsp;</td><td><a href="c3e41.html" class="tocviewlink" data-pltdoc="x">Exercise 3.41</a></td></tr><tr><td align="right">3.42&nbsp;</td><td><a href="c3e42.html" class="tocviewlink" data-pltdoc="x">Exercise 3.42</a></td></tr><tr><td align="right">3.43&nbsp;</td><td><a href="c3e43.html" class="tocviewlink" data-pltdoc="x">Exercise 3.43</a></td></tr><tr><td align="right">3.44&nbsp;</td><td><a href="c3e44.html" class="tocviewlink" data-pltdoc="x">Exercise 3.44</a></td></tr><tr><td align="right">3.45&nbsp;</td><td><a href="c3e45.html" class="tocviewlink" data-pltdoc="x">Exercise 3.45</a></td></tr><tr><td align="right">3.46&nbsp;</td><td><a href="c3e46.html" class="tocviewlink" data-pltdoc="x">Exercise 3.46</a></td></tr><tr><td align="right">3.47&nbsp;</td><td><a href="c3e47.html" class="tocviewlink" data-pltdoc="x">Exercise 3.47</a></td></tr><tr><td align="right">3.48&nbsp;</td><td><a href="c3e48.html" class="tocviewlink" data-pltdoc="x">Exercise 3.48</a></td></tr><tr><td align="right">3.49&nbsp;</td><td><a href="c3e49.html" class="tocviewlink" data-pltdoc="x">Exercise 3.49</a></td></tr><tr><td align="right">3.50&nbsp;</td><td><a href="c3e50.html" class="tocviewlink" data-pltdoc="x">Exercise 3.50</a></td></tr><tr><td align="right">3.51&nbsp;</td><td><a href="c3e51.html" class="tocviewlink" data-pltdoc="x">Exercise 3.51</a></td></tr><tr><td align="right">3.52&nbsp;</td><td><a href="c3e52.html" class="tocviewlink" data-pltdoc="x">Exercise 3.52</a></td></tr><tr><td align="right">3.53&nbsp;</td><td><a href="c3e53.html" class="tocviewlink" data-pltdoc="x">Exercise 3.53</a></td></tr><tr><td align="right">3.54&nbsp;</td><td><a href="c3e54.html" class="tocviewlink" data-pltdoc="x">Exercise 3.54</a></td></tr><tr><td align="right">3.55&nbsp;</td><td><a href="c3e55.html" class="tocviewlink" data-pltdoc="x">Exercise 3.55</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="c3e10.html" title="backward to &quot;3.10 Exercise 3.10&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Chapter_3.html" title="up to &quot;3 Chapter 3&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="c3e12.html" title="forward to &quot;3.12 Exercise 3.12&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>3.11<tt>&nbsp;</tt><a name="(part._c3e11)"></a>Exercise 3.11</h4><p><span style="font-weight: bold">TODO: Even more pictures</span></p><p>When we evaluate <span class="stt">(define acc (make-account 50))</span>, we create
a name <span class="stt">acc</span> in the global environment referring to the result
of the application <span class="stt">(make-account 50)</span>. This sets up a new
environment subordinate to the global environment with <span class="stt">balance</span>,
the parameter of <span class="stt">make-account</span>, bound to <span class="stt">50</span>. Then, we define
procedures <span class="stt">withdraw</span>, <span class="stt">deposit</span>, and <span class="stt">dispatch</span> in this
environment and return the procedure <span class="stt">dispatch</span>.</p><p>Suppose then we evaluate <span class="stt">((acc </span><span class="stt">&rsquo;</span><span class="stt">deposit) 40)</span>. This is a procedure
application, so we create a new environment subordinate to the global
environment. However, the procedure being evaluated is the result of evaluating
<span class="stt">(acc </span><span class="stt">&rsquo;</span><span class="stt">deposit)</span>. So a new environment is created subordinate to the
environment <span class="stt">acc</span> was defined in with <span class="stt">m</span>, the formal paramter of
<span class="stt">dispatch</span>, bound to <span class="stt"></span><span class="stt">&rsquo;</span><span class="stt">deposit</span>. The procedure is then evaluated and the
procedure <span class="stt">deposit</span> from earlier is returned.</p><p>This procedure is then called with its formal paramter <span class="stt">amount</span> bound
to <span class="stt">40</span>. This occurs in an environment subordinate to the one <span class="stt">withdraw</span>
was defined in and updates the <span class="stt">balance</span> set in this environment. The
new balance of <span class="stt">90</span> is returned.</p><p>Similar happens when evaluating <span class="stt">((acc </span><span class="stt">&rsquo;</span><span class="stt">withdraw) 60)</span>.</p><p>If we define a new account, as in <span class="stt">(define acc2 (make-account 100))</span>,
it refers to a separate procedure returned as the result of
<span class="stt">(make-account 100)</span>. <span class="stt">acc</span> and <span class="stt">acc2</span> both share entries from
the global environment, as they are both subordinate to it. However, the
actual procedures these names refer to are different and are defined in
different environments, which keeps their local states separate.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="c3e10.html" title="backward to &quot;3.10 Exercise 3.10&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Chapter_3.html" title="up to &quot;3 Chapter 3&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="c3e12.html" title="forward to &quot;3.12 Exercise 3.12&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>